{
  "entityType" : "WIDGET_TYPE",
  "entity" : {
    "fqn" : "broadcast_geo_map_floor_plan_layer",
    "name" : "Broadcast Geo Map Floor Plan Layer",
    "deprecated" : false,
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "",
      "templateCss" : "* {\n    font-family: 'Roboto';\n}\n\n.leaflet-zoom-box {\n\tz-index: 9;\n}\n\n.leaflet-pane         { z-index: 4; }\n\n.leaflet-tile-pane    { z-index: 2; }\n.leaflet-overlay-pane { z-index: 4; }\n.leaflet-shadow-pane  { z-index: 5; }\n.leaflet-marker-pane  { z-index: 6; }\n.leaflet-tooltip-pane   { z-index: 7; }\n.leaflet-popup-pane   { z-index: 8; }\n\n.leaflet-map-pane canvas { z-index: 1; }\n.leaflet-map-pane svg    { z-index: 2; }\n\n.leaflet-control {\n\tz-index: 9;\n}\n.leaflet-top,\n.leaflet-bottom {\n\tz-index: 11;\n}\n\n.tb-marker-label {\n    border: none;\n    background: none;\n    box-shadow: none;\n}\n\n.tb-marker-label:before {\n    border: none;\n    background: none;\n}\n\n.leaflet-left {\n    width: 100%;\n    margin-right: 10px;\n    /*left: 50%;*/\n    /*transform: translate(-50%, 0%);*/\n}\n\n.leaflet-control {\n    margin: 10px;\n}\n.map-legend {\n    width: 97%;\n    height: 100px;\n    background-color: transparent;\n    \n    display: flex;\n    align-items: center;\n    justify-content: center;\n    pointer-events: none;\n    /*padding-left: 50%;*/\n    /*padding-bottom: 50%;*/\n    /*transform: translate(-50%, 0%);*/\n}\n\n.legend-area {\n    background-color: white;\n    border-radius: 8px;\n    display: flex;\n    padding: 5px 5px;\n    box-shadow: 0px 0px 10px 6px rgba(19, 27, 77, 0.05);\n}\n\n.legend-block {\n    padding: 0px 15px;\n}\n\n.legend-block-header {\n    font-weight: 400;\n    font-size: 13px;\n    color: #8E9097;\n}\n\n.legend-block-value {\n    font-weight: 400;\n    font-size: 16px;\n    color: #3E3E3E;\n}",
      "controllerScript" : "//Alias settings\n\n// Required minimum 1 alias with the next keys:\n// - floorplan (it can be any name/label, but it should be an decoded image on base64 format)\n// - perimeter (polygone, only 4 dots)\n// - pointA (attribute, can be null)\n// - pointB (attribute, can be null)\n// - pointC (attribute, can be null)\n\nlet attributeService, utils, settings;\n \nself.onInit = function() {\n    let $scope = self.ctx.$scope;\n    $scope.widgetText = 'Ready to get data';\n    self.ctx.broadcastService = $scope.$injector.get(self.ctx.servicesMap.get('broadcastService'));\n    self.ctx.broadcastService.on('geofencesUpdate', (event, args) => {\n        self.ctx.updateAliases();\n        self.ctx.detectChanges();\n    });\n    attributeService = self.ctx.$scope.$injector.get(self.ctx.servicesMap.get('attributeService'));\n    utils = self.ctx.$scope.$injector.get(self.ctx.servicesMap.get('utils'));\n    settings = utils.deepClone(self.ctx.settings) || {};\n    \n    self.ctx.map = new TbMapWidgetV2('openstreet-map', false, self.ctx);\n    \n    self.ctx.$scope.saveCoordinates = function(){\n        if(self.ctx.$scope.entityId){\n            attributeService.saveEntityAttributes(self.ctx.$scope.entityId, 'SERVER_SCOPE',\n                [{key: 'pointA', value: self.ctx.$scope.pointA}, \n                {key: 'pointB', value: self.ctx.$scope.pointB}, \n                {key: 'pointC', value: self.ctx.$scope.pointC}]).subscribe(() => {\n                    self.ctx.showSuccessToast(\"Coordinates were updated successfully!\", 4000, \"bottom\", \"left\", \"layout\");\n                });\n        }\n    };\n    \n    var customControl = L.Control.extend({\n        options: {\n            position: 'topleft'\n        },\n    \n        onAdd: function (map) {\n            var container = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');\n    \n            container.style.backgroundColor = 'white';\n            container.style.width = '34px';\n            container.style.height = '34px';\n            container.style.cursor = 'pointer';\n            container.title = 'Save'; \n            container.style.display = 'flex';\n            container.style.alignItems = 'center';\n            container.style.justifyContent = 'center';\n        \n            var icon = L.DomUtil.create('i', 'fa-solid fa-floppy-disk');\n            container.appendChild(icon);\n    \n            container.onclick = function () {\n                self.ctx.$scope.saveCoordinates();\n            };\n            \n            return container;\n        }\n    });\n    \n    if(settings.draggableImage){\n        self.ctx.map.map.map.addControl(new customControl());\n    }\n    \n    self.ctx.$scope.floorplan;\n    self.ctx.$scope.perimeter;\n    self.ctx.$scope.pointA;\n    self.ctx.$scope.pointB;\n    self.ctx.$scope.pointC;\n    self.ctx.$scope.layers = [];\n};\n\nself.onDataUpdated = function() {\n    self.ctx.datasources.forEach(x=>{\n        if(x.aliasName == settings.imageAlias){\n            self.ctx.$scope.entityId = x.entity.id;\n        }\n    });\n    \n    self.ctx.data.forEach(x=>{\n        if(x.dataKey.name == settings.imageKey){\n            self.ctx.$scope.floorplan = x.data[0][1];         \n        } else if(x.dataKey.label == settings.aliasPolygonKey){\n            if(x.data[0][1] && JSON.parse(x.data[0][1])){\n                self.ctx.$scope.perimeter = JSON.parse(x.data[0][1]);         \n            }\n        } else if(x.dataKey.name == \"pointA\"){\n            if(x.data[0][1] && JSON.parse(x.data[0][1])){\n                self.ctx.$scope.pointA = JSON.parse(x.data[0][1]);\n            }\n        } else if(x.dataKey.name == \"pointB\"){\n            if(x.data[0][1] && JSON.parse(x.data[0][1])){\n                self.ctx.$scope.pointB = JSON.parse(x.data[0][1]);\n            }\n        } else if(x.dataKey.name == \"pointC\"){\n            if(x.data[0][1] && JSON.parse(x.data[0][1])){\n                self.ctx.$scope.pointC = JSON.parse(x.data[0][1]);\n            }\n        }\n    })\n    \n    if(self.ctx.$scope.layers.length>0){\n        self.ctx.$scope.layers.forEach(x=>{\n        \tself.ctx.map.map.map.removeLayer(x); \n        })\n    }\n    \n    if(!self.ctx.$scope.pointA && !self.ctx.$scope.pointB && !self.ctx.$scope.pointC){\n        if(self.ctx.$scope.perimeter){\n            self.ctx.$scope.pointA = self.ctx.$scope.perimeter[0];\n            self.ctx.$scope.pointB = self.ctx.$scope.perimeter[1];\n            self.ctx.$scope.pointC = self.ctx.$scope.perimeter[2];\n        }\n    }\n    \n    if(self.ctx.$scope.floorplan && self.ctx.$scope.pointA && self.ctx.$scope.pointB && self.ctx.$scope.pointC){\n        var point1 = L.latLng(self.ctx.$scope.pointA[0], self.ctx.$scope.pointA[1]),\n    \t    point2 = L.latLng(self.ctx.$scope.pointB[0], self.ctx.$scope.pointB[1]), \n    \t    point3 = L.latLng(self.ctx.$scope.pointC[0], self.ctx.$scope.pointC[1]);\n    \t\n    \tlet size = settings.draggableImage ? 20 : 1;\n        \t\n    \tvar editIcon = L.icon({\n            iconUrl: iconImg,\n            iconSize: [size, size]\n        });\n    \t\n        var\tmarker1 = L.marker(point1, {draggable: settings.draggableImage, icon: editIcon} ).addTo(self.ctx.map.map.map),\n    \t    marker2 = L.marker(point2, {draggable: settings.draggableImage, icon: editIcon} ).addTo(self.ctx.map.map.map),\n    \t    marker3 = L.marker(point3, {draggable: settings.draggableImage, icon: editIcon} ).addTo(self.ctx.map.map.map);\n    \n    \tvar\tbounds = new L.LatLngBounds(point1, point2).extend(point3);\n    \n    \tself.ctx.map.map.map.fitBounds(bounds);\n    \t\n    \tvar overlay = L.imageOverlay.rotated(self.ctx.$scope.floorplan, point1, point2, point3, {\n    \t\topacity: 0.4,\n    \t\tinteractive: true\n    \t});\n        \n        function repositionImage() {\n            self.ctx.$scope.pointA = Object.entries(marker1.getLatLng()).map(x=>x[1]);\n    \t\tself.ctx.$scope.pointB = Object.entries(marker2.getLatLng()).map(x=>x[1]);\n    \t\tself.ctx.$scope.pointC = Object.entries(marker3.getLatLng()).map(x=>x[1]);\n    \t\t\n    \t\toverlay.reposition(marker1.getLatLng(), marker2.getLatLng(), marker3.getLatLng());\n    \t}\n    \t\n    \tif(settings.draggableImage){\n        \tmarker1.on('drag dragend', repositionImage);\n        \tmarker2.on('drag dragend', repositionImage);\n        \tmarker3.on('drag dragend', repositionImage);\n    \t}\n    \n    \tself.ctx.map.map.map.addLayer(overlay);\n    \tself.ctx.$scope.layers.push(overlay);  \n    \tself.ctx.$scope.layers.push(marker1);\n    \tself.ctx.$scope.layers.push(marker2);\n    \tself.ctx.$scope.layers.push(marker3);\n    \t\n\t    self.ctx.map.update();\n    }\n\n    self.ctx.map.update();\n}\n\nself.onResize = function() {\n    self.ctx.map.resize();\n}\n\nself.actionSources = function() {\n    return TbMapWidgetV2.actionSources();\n}\n\nself.onDestroy = function() {\n    self.ctx.map.destroy();\n}\n\nself.typeParameters = function() {\n    return {\n        hasDataPageLink: true\n    };\n}\n\nL.ImageOverlay.Rotated = L.ImageOverlay.extend({\n\n\tinitialize: function (image, topleft, topright, bottomleft, options) {\n\n\t\tif (typeof(image) === 'string') {\n\t\t\tthis._url = image;\n\t\t} else {\n\t\t\tthis._rawImage = image;\n\t\t}\n\n\t\tthis._topLeft    = L.latLng(topleft);\n\t\tthis._topRight   = L.latLng(topright);\n\t\tthis._bottomLeft = L.latLng(bottomleft);\n\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\t\tif (!this._image) {\n\t\t\tthis._initImage();\n\n\t\t\tif (this.options.opacity < 1) {\n\t\t\t\tthis._updateOpacity();\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.interactive) {\n\t\t\tL.DomUtil.addClass(this._rawImage, 'leaflet-interactive');\n\t\t\tthis.addInteractiveTarget(this._rawImage);\n\t\t}\n\n\t\tmap.on('zoomend resetview', this._reset, this);\n\n\t\tthis.getPane().appendChild(this._image);\n\t\tthis._reset();\n\t},\n\n    onRemove: function(map) {\n        map.off('zoomend resetview', this._reset, this);\n        L.ImageOverlay.prototype.onRemove.call(this, map);\n    },\n\n\t_initImage: function () {\n\t\tvar img = this._rawImage;\n\t\tif (this._url) {\n\t\t\timg = L.DomUtil.create('img');\n\t\t\timg.style.display = 'none';\n\n\t\t\tif (this.options.crossOrigin) {\n\t\t\t\timg.crossOrigin = '';\n\t\t\t}\n\n\t\t\timg.src = this._url;\n\t\t\tthis._rawImage = img;\n\t\t}\n\t\tL.DomUtil.addClass(img, 'leaflet-image-layer');\n\n\t\tvar div = this._image = L.DomUtil.create('div',\n\t\t\t\t'leaflet-image-layer ' + (this._zoomAnimated ? 'leaflet-zoom-animated' : ''));\n\n\t\tthis._updateZIndex(); \n\t\t\n\t\tdiv.appendChild(img);\n\n\t\tdiv.onselectstart = L.Util.falseFn;\n\t\tdiv.onmousemove = L.Util.falseFn;\n\n\t\timg.onload = function(){\n\t\t\tthis._reset();\n\t\t\timg.style.display = 'block';\n\t\t\tthis.fire('load');\n\t\t}.bind(this);\n\n\t\timg.alt = this.options.alt;\n\t},\n\n\n\t_reset: function () {\n\t\tvar div = this._image;\n\n\t\tif (!this._map) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pxTopLeft    = this._map.latLngToLayerPoint(this._topLeft);\n\t\tvar pxTopRight   = this._map.latLngToLayerPoint(this._topRight);\n\t\tvar pxBottomLeft = this._map.latLngToLayerPoint(this._bottomLeft);\n\t\tvar pxBottomRight = pxTopRight.subtract(pxTopLeft).add(pxBottomLeft);\n\n\t\tvar pxBounds = L.bounds([pxTopLeft, pxTopRight, pxBottomLeft, pxBottomRight]);\n\t\tvar size = pxBounds.getSize();\n\t\tvar pxTopLeftInDiv = pxTopLeft.subtract(pxBounds.min);\n\n\t\tthis._bounds = L.latLngBounds( this._map.layerPointToLatLng(pxBounds.min),\n\t\t                               this._map.layerPointToLatLng(pxBounds.max) );\n\n\t\tL.DomUtil.setPosition(div, pxBounds.min);\n\n\t\tdiv.style.width  = size.x + 'px';\n\t\tdiv.style.height = size.y + 'px';\n\n\t\tvar imgW = this._rawImage.width;\n\t\tvar imgH = this._rawImage.height;\n\t\tif (!imgW || !imgH) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar vectorX = pxTopRight.subtract(pxTopLeft);\n\t\tvar vectorY = pxBottomLeft.subtract(pxTopLeft);\n\n\t\tthis._rawImage.style.transformOrigin = '0 0';\n\t\tthis._rawImage.style.transform = \"matrix(\" +\n\t\t\t(vectorX.x/imgW) + ', ' + (vectorX.y/imgW) + ', ' +\n\t\t\t(vectorY.x/imgH) + ', ' + (vectorY.y/imgH) + ', ' +\n\t\t\tpxTopLeftInDiv.x + ', ' + pxTopLeftInDiv.y + ')';\n\t},\n\n\n\treposition: function(topleft, topright, bottomleft) {\n\t\tthis._topLeft    = L.latLng(topleft);\n\t\tthis._topRight   = L.latLng(topright);\n\t\tthis._bottomLeft = L.latLng(bottomleft);\n\t\tthis._reset();\n\t},\n\n\n\tsetUrl: function (url) {\n\t\tthis._url = url;\n\n\t\tif (this._rawImage) {\n\t\t\tthis._rawImage.src = url;\n\t\t}\n\t\treturn this;\n\t}\n});\n\nlet iconImg = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAACIklEQVR4AbVVPUwbMRh9dlLUMadOoUUla2FoNzo1UzuWqVKntlI7EzrSgctQxpI9ldoNqVMZ2WAqncpAWS8QCCzosoIim+/L3XGXu7NlhjzJ8tk+v2d/fxawIAjCWvU+VqDR1MC8oBYvDakdCKjtipC/63WvZ+IQpcTn4XxV4wd9NuEAIfCzArTLhGR+on8RrhD5P1dyhtZ4P6I9x4PLVkF8gvw8XCdz+Cai/0HULzRghoA/V/fa6RDpyaHQsZG/+RJ9//pqF1FQq49nH3RuBWKbs1lqJvJPG8CTRjr+vmYVGVYFnrFPxj6oKOWbyBk7+0B3LRLgxuQ7f2FDbRQFCUR8+gAO+LYV9Z/fwgmjK3hSarWMKUHOqJaUkK/zC2zj5LQu2NxKI2xCQMgX7IOneXJ26KslOOMl/ftxoyjCmS/6g1BnyTkUny+mEZPF/mHULy0W145o75/DYghLTBniZBAGmSI2vgVftyzOTVGUmLVb3DOURN7Lziy4xfkEkjwpSbyDqtJqj7zdzItY600OprygkrEt1bXsYEqYobdCNhoePx67th/zce6SJ/xGcC1yLnbs+MRsHJJdx2J3W65PB2GLEmLTtOMu5ZpIVx/Nemm5TtA/C32aWbeJMKwBoNGee+j5GbFJxDdhkRruhiGRtZOTGwUY7BN+I4SQ7+CGXbL5h7JHX9h2sdA9jWW6EVdcLorjW9G4N05Qjb3RNTpxJJbiBlqW2eTUIrjiAAAAAElFTkSuQmCC\"\n\nL.imageOverlay.rotated = function(imgSrc, topleft, topright, bottomleft, options) {\n\treturn new L.ImageOverlay.Rotated(imgSrc, topleft, topright, bottomleft, options);\n};",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"imageAlias\": {\n                \"title\": \"Floor plan alias\",\n                \"type\": \"string\"\n            },\n            \"imageKey\": {\n                \"title\": \"Alias key\",\n                \"type\": \"string\"\n            },\n            \"aliasPolygonKey\": {\n                \"title\": \"Alias Polygon Key\",\n                \"type\": \"string\"\n            },\n            \"draggableImage\": {\n                \"title\": \"Draggable Image\",\n                \"type\": \"boolean\"\n            },\n            \"apiKey\": {\n                \"title\": \"API key\",\n                \"description\": \"API key for api.openrouteservice.org/v2\",\n                \"type\": \"string\"\n            },\n            \"provider\": {\n                \"title\": \"Map Provider\",\n                \"type\": \"string\",\n                \"default\": \"openstreet-map\"\n            },\n            \"mapProvider\": {\n                \"title\": \"Map provider\",\n                \"type\": \"string\",\n                \"default\": \"OpenStreetMap.Mapnik\"\n            },\n            \"useCustomProvider\": {\n                \"title\": \"Use custom provider\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"customProviderTileUrl\": {\n                \"title\": \"Custom provider tile URL\",\n                \"type\": \"string\",\n                \"default\": \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            },\n            \"tmApiKey\": {\n                \"title\": \"Tencent Maps API Key\",\n                \"type\": \"string\",\n                \"default\": \"84d6d83e0e51e481e50454ccbe8986b\"\n            },\n            \"tmDefaultMapType\": {\n                \"title\": \"Default map type\",\n                \"type\": \"string\",\n                \"default\": \"roadmap\"\n            },\n            \"gmApiKey\": {\n                \"title\": \"Google Maps API Key\",\n                \"type\": \"string\",\n                \"default\": \"AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q\"\n            },\n            \"gmDefaultMapType\": {\n                \"title\": \"Default map type\",\n                \"type\": \"string\",\n                \"default\": \"roadmap\"\n            },\n            \"mapProviderHere\": {\n                \"title\": \"Map layer\",\n                \"type\": \"string\",\n                \"default\": \"HERE.normalDay\"\n            },\n            \"credentials\": {\n                \"type\": \"object\",\n                \"title\": \"Credentials\",\n                \"properties\": {\n                    \"app_id\": {\n                        \"title\": \"HERE app id\",\n                        \"type\": \"string\",\n                        \"default\": \"AhM6TzD9ThyK78CT3ptx\"\n                    },\n                    \"app_code\": {\n                        \"title\": \"HERE app code\",\n                        \"type\": \"string\",\n                        \"default\": \"p6NPiITB3Vv0GMUFnkLOOg\"\n                    }\n                },\n                \"required\": [\n                    \"app_id\",\n                    \"app_code\"\n                ]\n            },\n            \"mapImageUrl\": {\n                \"title\": \"Image map background\",\n                \"type\": \"string\",\n                \"default\": \"data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg==\"\n            },\n            \"imageEntityAlias\": {\n                \"title\": \"Image URL source entity alias\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"imageUrlAttribute\": {\n                \"title\": \"Image URL source entity attribute\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"defaultZoomLevel\": {\n                \"title\": \"Default map zoom level (0 - 20)\",\n                \"type\": \"number\"\n            },\n            \"useDefaultCenterPosition\": {\n                \"title\": \"Use default map center position\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"mapPageSize\": {\n                \"title\": \"Limit of entities to load\",\n                \"type\": \"number\",\n                \"default\": 16384\n            },\n            \"defaultCenterPosition\": {\n                \"title\": \"Default map center position (0,0)\",\n                \"type\": \"string\",\n                \"default\": \"0,0\"\n            },\n            \"fitMapBounds\": {\n                \"title\": \"Fit map bounds to cover all markers\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"draggableMarker\": {\n                \"title\": \"Draggable Marker\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"disableScrollZooming\": {\n                \"title\": \"Disable scroll zooming\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"disableZoomControl\": {\n                \"title\": \"Disable zoom control buttons\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"latKeyName\": {\n                \"title\": \"Latitude key name\",\n                \"type\": \"string\",\n                \"default\": \"latitude\"\n            },\n            \"lngKeyName\": {\n                \"title\": \"Longitude key name\",\n                \"type\": \"string\",\n                \"default\": \"longitude\"\n            },\n            \"xPosKeyName\": {\n                \"title\": \"X position key name\",\n                \"type\": \"string\",\n                \"default\": \"xPos\"\n            },\n            \"yPosKeyName\": {\n                \"title\": \"Y position key name\",\n                \"type\": \"string\",\n                \"default\": \"yPos\"\n            },\n            \"showLabel\": {\n                \"title\": \"Show label\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"label\": {\n                \"title\": \"Label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )\",\n                \"type\": \"string\",\n                \"default\": \"${entityName}\"\n            },\n            \"useLabelFunction\": {\n                \"title\": \"Use label function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"labelFunction\": {\n                \"title\": \"Label function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"showTooltip\": {\n                \"title\": \"Show tooltip\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"showTooltipAction\": {\n                \"title\": \"Action for displaying the tooltip\",\n                \"type\": \"string\",\n                \"default\": \"click\"\n            },\n            \"autocloseTooltip\": {\n                \"title\": \"Auto-close tooltips\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"tooltipPattern\": {\n                \"title\": \"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')\",\n                \"type\": \"string\",\n                \"default\": \"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}\"\n            },\n            \"useTooltipFunction\": {\n                \"title\": \"Use tooltip function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"tooltipFunction\": {\n                \"title\": \"Tooltip function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"posFunction\": {\n                \"title\": \"Position conversion function: f(origXPos, origYPos), should return x,y coordinates as double from 0 to 1 each\",\n                \"type\": \"string\",\n                \"default\": \"return {x: origXPos, y: origYPos};\"\n            },\n            \"markerOffsetX\": {\n                \"title\": \"Marker X offset relative to position multiplied by marker width\",\n                \"type\": \"number\",\n                \"default\": 0.5\n            },\n            \"markerOffsetY\": {\n                \"title\": \"Marker Y offset relative to position multiplied by marker height\",\n                \"type\": \"number\",\n                \"default\": 1\n            },\n            \"tooltipOffsetX\": {\n                \"title\": \"Tooltip X offset relative to marker anchor multiplied by marker width\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"tooltipOffsetY\": {\n                \"title\": \"Tooltip Y offset relative to marker anchor multiplied by marker height\",\n                \"type\": \"number\",\n                \"default\": -1\n            },\n            \"color\": {\n                \"title\": \"Color\",\n                \"type\": \"string\"\n            },\n            \"useColorFunction\": {\n                \"title\": \"Use color function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"colorFunction\": {\n                \"title\": \"Color function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"markerImage\": {\n                \"title\": \"Custom marker image\",\n                \"type\": \"string\"\n            },\n            \"markerImageSize\": {\n                \"title\": \"Custom marker image size (px)\",\n                \"type\": \"number\",\n                \"default\": 34\n            },\n            \"useMarkerImageFunction\": {\n                \"title\": \"Use marker image function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"markerImageFunction\": {\n                \"title\": \"Marker image function: f(data, images, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"markerImages\": {\n                \"title\": \"Marker images\",\n                \"type\": \"array\",\n                \"items\": {\n                    \"title\": \"Marker image\",\n                    \"type\": \"string\"\n                }\n            },\n            \"showPolygon\": {\n                \"title\": \"Show polygon\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonKeyName\": {\n                \"title\": \"Polygon key name\",\n                \"type\": \"string\",\n                \"default\": \"perimeter\"\n            },\n            \"editablePolygon\": {\n                \"title\": \"Enable polygon edit\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"showPolygonLabel\": {\n                \"title\": \"Show polygon label\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonLabel\": {\n                \"title\": \"Polygon label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )\",\n                \"type\": \"string\",\n                \"default\": \"${entityName}\"\n            },\n            \"usePolygonLabelFunction\": {\n                \"title\": \"Use polygon label function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonLabelFunction\": {\n                \"title\": \"Polygon label function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"polygonColor\": {\n                \"title\": \"Polygon color\",\n                \"type\": \"string\"\n            },\n            \"polygonOpacity\": {\n                \"title\": \"Polygon opacity\",\n                \"type\": \"number\",\n                \"default\": 0.2\n            },\n            \"polygonStrokeColor\": {\n                \"title\": \"Stroke color\",\n                \"type\": \"string\"\n            },\n            \"polygonStrokeOpacity\": {\n                \"title\": \"Stroke opacity\",\n                \"type\": \"number\",\n                \"default\": 1\n            },\n            \"polygonStrokeWeight\": {\n                \"title\": \"Stroke weight\",\n                \"type\": \"number\",\n                \"default\": 3\n            },\n            \"showPolygonTooltip\": {\n                \"title\": \"Show polygon tooltip\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"showPolygonTooltipAction\": {\n                \"title\": \"Action for displaying polygon tooltip\",\n                \"type\": \"string\",\n                \"default\": \"click\"\n            },\n            \"autoClosePolygonTooltip\": {\n                \"title\": \"Auto-close polygon tooltips\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"polygonTooltipPattern\": {\n                \"title\": \"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')\",\n                \"type\": \"string\",\n                \"default\": \"<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}\"\n            },\n            \"usePolygonTooltipFunction\": {\n                \"title\": \"Use polygon tooltip function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonTooltipFunction\": {\n                \"title\": \"Polygon tooltip function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"usePolygonColorFunction\": {\n                \"title\": \"Use polygon color function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonColorFunction\": {\n                \"title\": \"Polygon Color function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"usePolygonStrokeColorFunction\": {\n                \"title\": \"Use polygon stroke color function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"polygonStrokeColorFunction\": {\n                \"title\": \"Polygon Stroke Color function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"showCircle\": {\n                \"title\": \"Show circle\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleKeyName\": {\n                \"title\": \"Circle key name\",\n                \"type\": \"string\",\n                \"default\": \"perimeter\"\n            },\n            \"editableCircle\": {\n                \"title\": \"Enable circle edit\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"showCircleLabel\": {\n                \"title\": \"Show circle label\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleLabel\": {\n                \"title\": \"Circle label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )\",\n                \"type\": \"string\",\n                \"default\": \"${entityName}\"\n            },\n            \"useCircleLabelFunction\": {\n                \"title\": \"Use circle label function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleLabelFunction\": {\n                \"title\": \"Circle label function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"circleFillColor\": {\n                \"title\": \"Circle fill color\",\n                \"type\": \"string\"\n            },\n            \"useCircleFillColorFunction\": {\n                \"title\": \"Use circle fill color function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleFillColorFunction\": {\n                \"title\": \"Circle fill color function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"circleFillColorOpacity\": {\n                \"title\": \"Circle fill color opacity\",\n                \"type\": \"number\",\n                \"default\": 0.2\n            },\n            \"circleStrokeColor\": {\n                \"title\": \"Circle stroke color\",\n                \"type\": \"string\"\n            },\n            \"useCircleStrokeColorFunction\": {\n                \"title\": \"Use circle stroke color function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleStrokeColorFunction\": {\n                \"title\": \"Circle stroke Color function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"circleStrokeOpacity\": {\n                \"title\": \"Circle stroke opacity\",\n                \"type\": \"number\",\n                \"default\": 1\n            },\n            \"circleStrokeWeight\": {\n                \"title\": \"Circle stroke weight\",\n                \"type\": \"number\",\n                \"default\": 3\n            },\n            \"showCircleTooltip\": {\n                \"title\": \"Show circle tooltip\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"showCircleTooltipAction\": {\n                \"title\": \"Action for displaying circle tooltip\",\n                \"type\": \"string\",\n                \"default\": \"click\"\n            },\n            \"autoCloseCircleTooltip\": {\n                \"title\": \"Auto-close circle tooltips\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"circleTooltipPattern\": {\n                \"title\": \"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')\",\n                \"type\": \"string\",\n                \"default\": \"<b>${entityName}</b><br/><br/><b>Temperatur:</b> ${temp:1}\"\n            },\n            \"useCircleTooltipFunction\": {\n                \"title\": \"Use circle tooltip function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"circleTooltipFunction\": {\n                \"title\": \"Circle tooltip function: f(data, dsData, dsIndex)\",\n                \"type\": \"string\"\n            },\n            \"useClusterMarkers\": {\n                \"title\": \"Use map markers clustering\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"zoomOnClick\": {\n                \"title\": \"Zoom when clicking on a cluster\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"maxZoom\": {\n                \"title\": \"The maximum zoom level when a marker can be part of a cluster (0 - 18)\",\n                \"type\": \"number\"\n            },\n            \"showCoverageOnHover\": {\n                \"title\": \"Show the bounds of markers when mouse over a cluster\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"animate\": {\n                \"title\": \"Show animation on markers when zooming\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"maxClusterRadius\": {\n                \"title\": \"Maximum radius that a cluster will cover in pixels\",\n                \"type\": \"number\",\n                \"default\": 80\n            },\n            \"spiderfyOnMaxZoom\": {\n                \"title\": \"Spiderfy at the max zoom level (to see all cluster markers)\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"chunkedLoading\": {\n                \"title\": \"Use chunks for adding markers so that the page does not freeze\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"removeOutsideVisibleBounds\": {\n                \"title\": \"Use lazy load for adding markers\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"snappable\": {\n                \"title\": \"Enable snapping to other vertices for precision drawing\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"initDragMode\": {\n                \"title\": \"Initialize map in draggable mode\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"hideAllControlButton\": {\n                \"title\": \"Hide all edit control buttons\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"hideDrawControlButton\": {\n                \"title\": \"Hide draw buttons\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"hideEditControlButton\": {\n                \"title\": \"Hide edit buttons\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"hideRemoveControlButton\": {\n                \"title\": \"Hide remove button\",\n                \"type\": \"boolean\",\n                \"default\": false\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        [\n            \"apiKey\",\n            {\n                \"key\": \"provider\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"google-map\",\n                        \"label\": \"Google maps\"\n                    },\n                    {\n                        \"value\": \"openstreet-map\",\n                        \"label\": \"Openstreet maps\"\n                    },\n                    {\n                        \"value\": \"here\",\n                        \"label\": \"HERE maps\"\n                    },\n                    {\n                        \"value\": \"image-map\",\n                        \"label\": \"Image map\"\n                    },\n                    {\n                        \"value\": \"tencent-map\",\n                        \"label\": \"Tencent maps\"\n                    }\n                ]\n            },\n            {\n                \"key\": \"mapProvider\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"OpenStreetMap.Mapnik\",\n                        \"label\": \"OpenStreetMap.Mapnik (Default)\"\n                    },\n                    {\n                        \"value\": \"OpenStreetMap.HOT\",\n                        \"label\": \"OpenStreetMap.HOT\"\n                    },\n                    {\n                        \"value\": \"Esri.WorldStreetMap\",\n                        \"label\": \"Esri.WorldStreetMap\"\n                    },\n                    {\n                        \"value\": \"Esri.WorldTopoMap\",\n                        \"label\": \"Esri.WorldTopoMap\"\n                    },\n                    {\n                        \"value\": \"CartoDB.Positron\",\n                        \"label\": \"CartoDB.Positron\"\n                    },\n                    {\n                        \"value\": \"CartoDB.DarkMatter\",\n                        \"label\": \"CartoDB.DarkMatter\"\n                    }\n                ],\n                \"condition\": \"model.provider === 'openstreet-map' && model.provider === 'openstreet-map'\"\n            },\n            {\n                \"key\": \"useCustomProvider\",\n                \"condition\": \"model.provider === 'openstreet-map' && model.provider === 'openstreet-map'\"\n            },\n            {\n                \"key\": \"customProviderTileUrl\",\n                \"condition\": \"model.useCustomProvider === true && model.provider === 'openstreet-map' && model.provider === 'openstreet-map'\"\n            },\n            {\n                \"key\": \"tmApiKey\",\n                \"condition\": \"model.provider === 'tencent-map' && model.provider === 'tencent-map'\"\n            },\n            {\n                \"key\": \"tmDefaultMapType\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"roadmap\",\n                        \"label\": \"Roadmap\"\n                    },\n                    {\n                        \"value\": \"satellite\",\n                        \"label\": \"Satellite\"\n                    },\n                    {\n                        \"value\": \"hybrid\",\n                        \"label\": \"Hybrid\"\n                    }\n                ],\n                \"condition\": \"model.provider === 'tencent-map' && model.provider === 'tencent-map'\"\n            },\n            {\n                \"key\": \"gmApiKey\",\n                \"condition\": \"model.provider === 'google-map' && model.provider === 'google-map'\"\n            },\n            {\n                \"key\": \"gmDefaultMapType\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"roadmap\",\n                        \"label\": \"Roadmap\"\n                    },\n                    {\n                        \"value\": \"satellite\",\n                        \"label\": \"Satellite\"\n                    },\n                    {\n                        \"value\": \"hybrid\",\n                        \"label\": \"Hybrid\"\n                    },\n                    {\n                        \"value\": \"terrain\",\n                        \"label\": \"Terrain\"\n                    }\n                ],\n                \"condition\": \"model.provider === 'google-map' && model.provider === 'google-map'\"\n            },\n            {\n                \"key\": \"mapProviderHere\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"HERE.normalDay\",\n                        \"label\": \"HERE.normalDay (Default)\"\n                    },\n                    {\n                        \"value\": \"HERE.normalNight\",\n                        \"label\": \"HERE.normalNight\"\n                    },\n                    {\n                        \"value\": \"HERE.hybridDay\",\n                        \"label\": \"HERE.hybridDay\"\n                    },\n                    {\n                        \"value\": \"HERE.terrainDay\",\n                        \"label\": \"HERE.terrainDay\"\n                    }\n                ],\n                \"condition\": \"model.provider === 'here' && model.provider === 'here'\"\n            },\n            {\n                \"key\": \"credentials\",\n                \"condition\": \"model.provider === 'here' && model.provider === 'here'\"\n            },\n            {\n                \"key\": \"mapImageUrl\",\n                \"type\": \"image\",\n                \"condition\": \"model.provider === 'image-map' && model.provider === 'image-map'\"\n            },\n            {\n                \"key\": \"imageEntityAlias\",\n                \"condition\": \"model.provider === 'image-map' && model.provider === 'image-map'\"\n            },\n            {\n                \"key\": \"imageUrlAttribute\",\n                \"condition\": \"model.provider === 'image-map' && model.provider === 'image-map'\"\n            }\n        ],\n        [\n            {\n                \"key\": \"imageAlias\"\n            },\n            {\n                \"key\": \"imageKey\"\n            },\n            {\n                \"key\": \"aliasPolygonKey\"\n            },\n            {\n                \"key\": \"draggableImage\"\n            },\n            {\n                \"key\": \"defaultZoomLevel\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"useDefaultCenterPosition\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"defaultCenterPosition\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"fitMapBounds\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            \"mapPageSize\",\n            \"draggableMarker\",\n            \"disableScrollZooming\",\n            \"disableZoomControl\",\n            {\n                \"key\": \"latKeyName\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"lngKeyName\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"xPosKeyName\",\n                \"condition\": \"model.provider === \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"yPosKeyName\",\n                \"condition\": \"model.provider === \\\"image-map\\\"\"\n            },\n            \"showLabel\",\n            {\n                \"key\": \"useLabelFunction\",\n                \"condition\": \"model.showLabel === true\"\n            },\n            {\n                \"key\": \"label\",\n                \"condition\": \"model.showLabel === true && model.useLabelFunction !== true\"\n            },\n            {\n                \"key\": \"labelFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/label_fn\",\n                \"condition\": \"model.showLabel === true && model.useLabelFunction === true\"\n            },\n            \"showTooltip\",\n            {\n                \"key\": \"showTooltipAction\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"click\",\n                        \"label\": \"Show tooltip on click (Default)\"\n                    },\n                    {\n                        \"value\": \"hover\",\n                        \"label\": \"Show tooltip on hover\"\n                    }\n                ],\n                \"condition\": \"model.showTooltip === true\"\n            },\n            {\n                \"key\": \"autocloseTooltip\",\n                \"condition\": \"model.showTooltip === true\"\n            },\n            {\n                \"key\": \"useTooltipFunction\",\n                \"condition\": \"model.showTooltip === true\"\n            },\n            {\n                \"key\": \"tooltipPattern\",\n                \"type\": \"textarea\",\n                \"condition\": \"model.showTooltip === true && model.useTooltipFunction !== true\"\n            },\n            {\n                \"key\": \"tooltipFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/tooltip_fn\",\n                \"condition\": \"model.showTooltip === true && model.useTooltipFunction === true\"\n            },\n            {\n                \"key\": \"tooltipOffsetX\",\n                \"condition\": \"model.showTooltip === true\"\n            },\n            {\n                \"key\": \"tooltipOffsetY\",\n                \"condition\": \"model.showTooltip === true\"\n            },\n            \"markerOffsetX\",\n            \"markerOffsetY\",\n            {\n                \"key\": \"posFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/position_fn\",\n                \"condition\": \"model.provider === \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"color\",\n                \"type\": \"color\"\n            },\n            \"useColorFunction\",\n            {\n                \"key\": \"colorFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/color_fn\",\n                \"condition\": \"model.useColorFunction === true\"\n            },\n            \"useMarkerImageFunction\",\n            {\n                \"key\": \"markerImage\",\n                \"type\": \"image\",\n                \"condition\": \"model.useMarkerImageFunction !== true\"\n            },\n            {\n                \"key\": \"markerImageSize\",\n                \"condition\": \"model.useMarkerImageFunction !== true\"\n            },\n            {\n                \"key\": \"markerImageFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/marker_image_fn\",\n                \"condition\": \"model.useMarkerImageFunction === true\"\n            },\n            {\n                \"key\": \"markerImages\",\n                \"items\": [\n                    {\n                        \"key\": \"markerImages[]\",\n                        \"type\": \"image\"\n                    }\n                ],\n                \"condition\": \"model.useMarkerImageFunction === true\"\n            }\n        ],\n        [\n            \"showPolygon\",\n            {\n                \"key\": \"polygonKeyName\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"editablePolygon\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"showPolygonLabel\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"usePolygonLabelFunction\",\n                \"condition\": \"model.showPolygonLabel === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonLabel\",\n                \"condition\": \"model.showPolygonLabel === true && model.usePolygonLabelFunction !== true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonLabelFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/label_fn\",\n                \"condition\": \"model.showPolygonLabel === true && model.usePolygonLabelFunction === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonColor\",\n                \"type\": \"color\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"usePolygonColorFunction\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonColorFunction\",\n                \"helpId\": \"widget/lib/map/polygon_color_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.usePolygonColorFunction === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonOpacity\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonStrokeColor\",\n                \"type\": \"color\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"usePolygonStrokeColorFunction\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonStrokeColorFunction\",\n                \"helpId\": \"widget/lib/map/polygon_color_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.usePolygonStrokeColorFunction === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonStrokeOpacity\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonStrokeWeight\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"showPolygonTooltip\",\n                \"condition\": \"model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"showPolygonTooltipAction\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"click\",\n                        \"label\": \"Show tooltip on click (Default)\"\n                    },\n                    {\n                        \"value\": \"hover\",\n                        \"label\": \"Show tooltip on hover\"\n                    }\n                ],\n                \"condition\": \"model.showPolygonTooltip === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"autoClosePolygonTooltip\",\n                \"condition\": \"model.showPolygonTooltip === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"usePolygonTooltipFunction\",\n                \"condition\": \"model.showPolygonTooltip === true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonTooltipPattern\",\n                \"type\": \"textarea\",\n                \"condition\": \"model.showPolygonTooltip === true && model.usePolygonTooltipFunction !== true && model.showPolygon === true && model.showPolygon === true\"\n            },\n            {\n                \"key\": \"polygonTooltipFunction\",\n                \"helpId\": \"widget/lib/map/polygon_tooltip_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.showPolygonTooltip === true && model.usePolygonTooltipFunction === true && model.showPolygon === true && model.showPolygon === true\"\n            }\n        ],\n        [\n            \"showCircle\",\n            {\n                \"key\": \"circleKeyName\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"editableCircle\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"showCircleLabel\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"useCircleLabelFunction\",\n                \"condition\": \"model.showCircleLabel === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleLabel\",\n                \"condition\": \"model.showCircleLabel === true && model.useCircleLabelFunction !== true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleLabelFunction\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/map/label_fn\",\n                \"condition\": \"model.showCircleLabel === true && model.useCircleLabelFunction === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleFillColor\",\n                \"type\": \"color\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"useCircleFillColorFunction\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleFillColorFunction\",\n                \"helpId\": \"widget/lib/map/polygon_color_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.useCircleFillColorFunction === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleFillColorOpacity\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleStrokeColor\",\n                \"type\": \"color\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"useCircleStrokeColorFunction\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleStrokeColorFunction\",\n                \"helpId\": \"widget/lib/map/polygon_color_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.useCircleStrokeColorFunction === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleStrokeOpacity\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleStrokeWeight\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"showCircleTooltip\",\n                \"condition\": \"model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"showCircleTooltipAction\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [\n                    {\n                        \"value\": \"click\",\n                        \"label\": \"Show tooltip on click (Default)\"\n                    },\n                    {\n                        \"value\": \"hover\",\n                        \"label\": \"Show tooltip on hover\"\n                    }\n                ],\n                \"condition\": \"model.showCircleTooltip === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"autoCloseCircleTooltip\",\n                \"condition\": \"model.showCircleTooltip === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"useCircleTooltipFunction\",\n                \"condition\": \"model.showCircleTooltip === true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleTooltipPattern\",\n                \"type\": \"textarea\",\n                \"condition\": \"model.showCircleTooltip === true && model.useCircleTooltipFunction !== true && model.showCircle === true && model.showCircle === true\"\n            },\n            {\n                \"key\": \"circleTooltipFunction\",\n                \"helpId\": \"widget/lib/map/polygon_tooltip_fn\",\n                \"type\": \"javascript\",\n                \"condition\": \"model.showCircleTooltip === true && model.useCircleTooltipFunction === true && model.showCircle === true && model.showCircle === true\"\n            }\n        ],\n        [\n            {\n                \"key\": \"useClusterMarkers\",\n                \"condition\": \"model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"zoomOnClick\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"maxZoom\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"showCoverageOnHover\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"animate\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"maxClusterRadius\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"spiderfyOnMaxZoom\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"chunkedLoading\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            },\n            {\n                \"key\": \"removeOutsideVisibleBounds\",\n                \"condition\": \"model.useClusterMarkers === true && model.provider !== \\\"image-map\\\" && model.useClusterMarkers === true && model.provider !== \\\"image-map\\\"\"\n            }\n        ],\n        [\n            {\n                \"key\": \"snappable\",\n                \"condition\": \"(model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            },\n            {\n                \"key\": \"initDragMode\",\n                \"condition\": \"(model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            },\n            {\n                \"key\": \"hideAllControlButton\",\n                \"condition\": \"(model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            },\n            {\n                \"key\": \"hideDrawControlButton\",\n                \"condition\": \"model.hideAllControlButton == false && (model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            },\n            {\n                \"key\": \"hideEditControlButton\",\n                \"condition\": \"model.hideAllControlButton == false && (model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            },\n            {\n                \"key\": \"hideRemoveControlButton\",\n                \"condition\": \"model.hideAllControlButton == false && (model.editablePolygon === true || model.draggableMarker === true) && (model.editablePolygon === true || model.draggableMarker === true)\"\n            }\n        ]\n    ],\n    \"groupInfoes\": [\n        {\n            \"formIndex\": 0,\n            \"GroupTitle\": \"Map Provider Settings\"\n        },\n        {\n            \"formIndex\": 1,\n            \"GroupTitle\": \"Common Map Settings\"\n        },\n        {\n            \"formIndex\": 2,\n            \"GroupTitle\": \"Polygon Settings\"\n        },\n        {\n            \"formIndex\": 3,\n            \"GroupTitle\": \"Circle Settings\"\n        },\n        {\n            \"formIndex\": 4,\n            \"GroupTitle\": \"Markers Clustering Settings\"\n        },\n        {\n            \"formIndex\": 5,\n            \"GroupTitle\": \"Editor settings\"\n        }\n    ]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Attributes card\"}"
    },
    "externalId" : null,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "14d4d0d0-a5c0-11ef-b1f1-697ed6298748"
    },
    "scada" : false,
    "tags" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}